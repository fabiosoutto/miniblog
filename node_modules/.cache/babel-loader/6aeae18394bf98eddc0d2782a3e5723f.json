{"ast":null,"code":"import _slicedToArray from\"C:/xampp/htdocs/Curso ReactJS/Curso ReactJS - Matheus Battisti/Projetos ReactJS/miniblog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//CSS\nimport styles from'./CreatePost.module.css';import{useState}from'react';import{useNavigate}from'react-router-dom';import{useAuthValue}from'../../context/AuthContext';import{useInsertDocument}from'../../hooks/useInsertDocument';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreatePost=function CreatePost(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),body=_useState6[0],setBody=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tags=_useState8[0],setTags=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),formError=_useState10[0],setFormError=_useState10[1];var _useAuthValue=useAuthValue(),user=_useAuthValue.user;var _useInsertDocument=useInsertDocument(\"posts\"),insertDocument=_useInsertDocument.insertDocument,response=_useInsertDocument.response;var navigate=useNavigate();var handleSubmit=function handleSubmit(e){e.preventDefault();setFormError(\"\");//validate image URL\ntry{new URL(image);}catch(error){setFormError(\"A imagem precisa ser uma URL.\");}//create Tag's Array\nvar tagsArray=tags.split(\",\").map(function(tag){return tag.trim().toLowerCase();});//Check all values\nif(!title||!image||!tags||!body){setFormError(\"Por favor, preencha todos os campos!\");}if(formError)return;insertDocument({title:title,image:image,body:body,tagsArray:tagsArray,uid:user.uid,createdBy:user.displayName});//redirect to home page\nnavigate(\"/\");};return/*#__PURE__*/_jsxs(\"div\",{className:styles.create_post,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Criar Post\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Escreva sobre o que quiser e compartilhe o seu conhecimento!\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"T\\xEDtulo do Post:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",required:true,placeholder:\"Pense em um bom t\\xEDtulo...\",onChange:function onChange(e){return setTitle(e.target.value);},value:title})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"URL da imagem:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"image\",required:true,placeholder:\"Insira a imagem que representa o seu post...\",onChange:function onChange(e){return setImage(e.target.value);},value:image})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Conte\\xFAdo do Post:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"body\",required:true,placeholder:\"Insira o conte\\xFAdo do post...\",onChange:function onChange(e){return setBody(e.target.value);},value:body})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Tags do Post:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"tags\",required:true,placeholder:\"Insira as tags separadas por virgula,\",onChange:function onChange(e){return setTags(e.target.value);},value:tags})]}),!response.loading&&/*#__PURE__*/_jsx(\"button\",{className:\"btn\",children:\"Cadastrar\"}),response.loading&&/*#__PURE__*/_jsx(\"button\",{className:\"btn\",disabled:true,children:\"Aguarde...\"}),response.error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:response.error}),formError&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:formError})]})]});};export default CreatePost;","map":{"version":3,"names":["styles","useState","useNavigate","useAuthValue","useInsertDocument","CreatePost","title","setTitle","image","setImage","body","setBody","tags","setTags","formError","setFormError","user","insertDocument","response","navigate","handleSubmit","e","preventDefault","URL","error","tagsArray","split","map","tag","trim","toLowerCase","uid","createdBy","displayName","create_post","target","value","loading"],"sources":["C:/xampp/htdocs/Curso ReactJS/Curso ReactJS - Matheus Battisti/Projetos ReactJS/miniblog/src/pages/CreatePost/CreatePost.js"],"sourcesContent":["//CSS\r\nimport styles from './CreatePost.module.css';\r\n\r\nimport { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuthValue } from '../../context/AuthContext';\r\nimport { useInsertDocument } from '../../hooks/useInsertDocument';\r\n\r\nconst CreatePost = () => {\r\n  const [title, setTitle] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [body, setBody] = useState(\"\");\r\n  const [tags, setTags] = useState([]);\r\n  const [formError, setFormError] = useState(\"\");\r\n\r\n  const {user} = useAuthValue();\r\n\r\n  const {insertDocument, response} = useInsertDocument(\"posts\");\r\n  \r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setFormError(\"\");\r\n\r\n    //validate image URL\r\n    try {\r\n      new URL(image)\r\n    } catch (error) {\r\n      setFormError(\"A imagem precisa ser uma URL.\");\r\n    }\r\n\r\n    //create Tag's Array\r\n    const tagsArray = tags.split(\",\").map((tag) => tag.trim().toLowerCase());\r\n\r\n    //Check all values\r\n    if (!title || !image || !tags || !body) {\r\n      setFormError(\"Por favor, preencha todos os campos!\");\r\n    }\r\n\r\n\r\n    if(formError) return;\r\n\r\n    insertDocument({\r\n      title,\r\n      image,\r\n      body,\r\n      tagsArray,\r\n      uid: user.uid,\r\n      createdBy: user.displayName,\r\n    });\r\n\r\n    //redirect to home page\r\n    navigate(\"/\");\r\n  };\r\n\r\n\r\n\r\n\r\n  return (\r\n    <div className={styles.create_post}>\r\n        <h2>Criar Post</h2>\r\n        <p>Escreva sobre o que quiser e compartilhe o seu conhecimento!</p>\r\n        <form onSubmit={handleSubmit}>\r\n          <label>\r\n            <span>Título do Post:</span>\r\n            <input \r\n              type=\"text\" \r\n              name=\"title\"\r\n              required \r\n              placeholder=\"Pense em um bom título...\"\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              value={title} \r\n            />\r\n          </label>\r\n          <label>\r\n            <span>URL da imagem:</span>\r\n            <input \r\n              type=\"text\" \r\n              name=\"image\"\r\n              required \r\n              placeholder=\"Insira a imagem que representa o seu post...\"\r\n              onChange={(e) => setImage(e.target.value)}\r\n              value={image} \r\n            />\r\n          </label>\r\n          <label>\r\n            <span>Conteúdo do Post:</span>\r\n            <textarea \r\n              name=\"body\"\r\n              required\r\n              placeholder=\"Insira o conteúdo do post...\"\r\n              onChange={(e) => setBody(e.target.value)}\r\n              value={body}\r\n              ></textarea>\r\n          </label>\r\n          <label>\r\n            <span>Tags do Post:</span>\r\n            <input \r\n              type=\"text\" \r\n              name=\"tags\"\r\n              required \r\n              placeholder=\"Insira as tags separadas por virgula,\"\r\n              onChange={(e) => setTags(e.target.value)}\r\n              value={tags} \r\n            />\r\n          </label>\r\n          {!response.loading && <button className='btn'>Cadastrar</button>} \r\n          {response.loading && <button className='btn' disabled>Aguarde...</button>}\r\n          {response.error && <p className='error'>{response.error}</p>}\r\n          {formError && <p className='error'>{formError}</p>}\r\n        </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreatePost;"],"mappings":"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"},"metadata":{},"sourceType":"module"}