{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { db } from \"../firebase/config\";\nimport { doc, getDoc } from \"firebase/firestore\";\nexport const useFetchDocument = (docCollection, id) => {\n  _s();\n\n  const [document, setDocument] = useState(null);\n  const [error, setError] = useState(null);\n  const [loading, setloading] = useState(null); // deal with memory leak\n\n  const [cancelled, setCancelled] = useState(false);\n  useEffect(() => {\n    async function loadDocument() {\n      if (cancelled) return;\n      setloading(true);\n\n      try {\n        const docRef = await doc(db, docCollection, id);\n        const docsnap = await getDoc(docRef);\n        setDocument(docSnap.data());\n        setloading(false);\n      } catch (error) {\n        console.log(error);\n        setError(error.message);\n        setloading(true);\n      }\n    }\n\n    loadDocument();\n  }, [docCollection, id]);\n  useEffect(() => {\n    return () => setCancelled(true);\n  }, []);\n  return {\n    document,\n    loading,\n    error\n  };\n};\n\n_s(useFetchDocument, \"m5i7ZMISB+2brnNCSAkIXUy7AoY=\");","map":{"version":3,"names":["useState","useEffect","db","doc","getDoc","useFetchDocument","docCollection","id","document","setDocument","error","setError","loading","setloading","cancelled","setCancelled","loadDocument","docRef","docsnap","docSnap","data","console","log","message"],"sources":["C:/xampp/htdocs/Curso ReactJS/Curso ReactJS - Matheus Battisti/Projetos ReactJS/miniblog/src/hooks/useFetchDocument.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { db } from \"../firebase/config\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\n\r\n\r\nexport const useFetchDocument = (docCollection, id) => {\r\n\r\n    const [document, setDocument] = useState(null);\r\n    const [error, setError] = useState(null);\r\n    const [loading, setloading] = useState(null);\r\n\r\n\r\n    // deal with memory leak\r\n    const [cancelled, setCancelled] = useState(false);\r\n\r\n    useEffect(() => {\r\n\r\n        async function loadDocument() {\r\n            if(cancelled) return;\r\n\r\n            setloading(true);\r\n\r\n            try {\r\n                const docRef = await doc(db, docCollection, id);\r\n                const docsnap = await getDoc(docRef);\r\n\r\n                setDocument(docSnap.data());\r\n\r\n                setloading(false);\r\n            } catch (error) {\r\n                console.log(error);\r\n                setError(error.message);\r\n\r\n                setloading(true);\r\n            }\r\n        }\r\n\r\n        loadDocument();\r\n\r\n    }, [docCollection, id]);\r\n\r\n    useEffect(() => {\r\n        return () => setCancelled(true);\r\n    }, []);\r\n    \r\n    return { document, loading, error };\r\n};"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,EAAT,QAAmB,oBAAnB;AACA,SAASC,GAAT,EAAcC,MAAd,QAA4B,oBAA5B;AAGA,OAAO,MAAMC,gBAAgB,GAAG,CAACC,aAAD,EAAgBC,EAAhB,KAAuB;EAAA;;EAEnD,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,IAAD,CAAxC;EACA,MAAM,CAACU,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,IAAD,CAAlC;EACA,MAAM,CAACY,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,IAAD,CAAtC,CAJmD,CAOnD;;EACA,MAAM,CAACc,SAAD,EAAYC,YAAZ,IAA4Bf,QAAQ,CAAC,KAAD,CAA1C;EAEAC,SAAS,CAAC,MAAM;IAEZ,eAAee,YAAf,GAA8B;MAC1B,IAAGF,SAAH,EAAc;MAEdD,UAAU,CAAC,IAAD,CAAV;;MAEA,IAAI;QACA,MAAMI,MAAM,GAAG,MAAMd,GAAG,CAACD,EAAD,EAAKI,aAAL,EAAoBC,EAApB,CAAxB;QACA,MAAMW,OAAO,GAAG,MAAMd,MAAM,CAACa,MAAD,CAA5B;QAEAR,WAAW,CAACU,OAAO,CAACC,IAAR,EAAD,CAAX;QAEAP,UAAU,CAAC,KAAD,CAAV;MACH,CAPD,CAOE,OAAOH,KAAP,EAAc;QACZW,OAAO,CAACC,GAAR,CAAYZ,KAAZ;QACAC,QAAQ,CAACD,KAAK,CAACa,OAAP,CAAR;QAEAV,UAAU,CAAC,IAAD,CAAV;MACH;IACJ;;IAEDG,YAAY;EAEf,CAxBQ,EAwBN,CAACV,aAAD,EAAgBC,EAAhB,CAxBM,CAAT;EA0BAN,SAAS,CAAC,MAAM;IACZ,OAAO,MAAMc,YAAY,CAAC,IAAD,CAAzB;EACH,CAFQ,EAEN,EAFM,CAAT;EAIA,OAAO;IAAEP,QAAF;IAAYI,OAAZ;IAAqBF;EAArB,CAAP;AACH,CAzCM;;GAAML,gB"},"metadata":{},"sourceType":"module"}