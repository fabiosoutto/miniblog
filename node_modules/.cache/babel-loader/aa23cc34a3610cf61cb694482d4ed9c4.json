{"ast":null,"code":"import _slicedToArray from\"C:/xampp/htdocs/Curso ReactJS/Curso ReactJS - Matheus Battisti/Projetos ReactJS/miniblog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";//CSS\nimport styles from'./EditPost.module.css';//Hooks\nimport{useEffect,useState}from'react';import{useNavigate,useParams}from'react-router-dom';import{useAuthValue}from'../../context/AuthContext';import{useFetchDocument}from'../../hooks/useFetchDocument';import{useUpdateDocument}from'../../hooks/useUpdateDocument';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EditPost=function EditPost(){var _useParams=useParams(),id=_useParams.id;var _useFetchDocument=useFetchDocument(\"posts\",id),post=_useFetchDocument.document;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),body=_useState6[0],setBody=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tags=_useState8[0],setTags=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),formError=_useState10[0],setFormError=_useState10[1];useEffect(function(){if(post){setTitle(post.title);setBody(post.body);setImage(post.image);var textTags=post.tagsArray.join(\", \");setTags(textTags);}},[post]);var _useAuthValue=useAuthValue(),user=_useAuthValue.user;var _useUpdateDocument=useUpdateDocument(\"posts\"),updateDocument=_useUpdateDocument.updateDocument,response=_useUpdateDocument.response;var navigate=useNavigate();var handleSubmit=function handleSubmit(e){e.preventDefault();setFormError(\"\");//validate image URL\ntry{new URL(image);}catch(error){setFormError(\"A imagem precisa ser uma URL.\");}//create Tag's Array\nvar tagsArray=tags.split(\",\").map(function(tag){return tag.trim().toLowerCase();});//Check all values\nif(!title||!image||!tags||!body){setFormError(\"Por favor, preencha todos os campos!\");}if(formError)return;var data={title:title,image:image,body:body,tagsArray:tagsArray,uid:user.uid,createdBy:user.displayName};updateDocument(id,data);//redirect to home page\nnavigate(\"/dashboard\");};return/*#__PURE__*/_jsx(\"div\",{className:styles.edit_post,children:post&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Editar Post: \",post.title]}),/*#__PURE__*/_jsx(\"p\",{children:\"Edite os dados do post conforme desejar!\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"T\\xEDtulo do Post:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",required:true,placeholder:\"Pense em um bom t\\xEDtulo...\",onChange:function onChange(e){return setTitle(e.target.value);},value:title})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"URL da imagem:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"image\",required:true,placeholder:\"Insira a imagem que representa o seu post...\",onChange:function onChange(e){return setImage(e.target.value);},value:image})]}),/*#__PURE__*/_jsx(\"p\",{className:styles.preview_title,children:\"Preview da imagem:\"}),/*#__PURE__*/_jsx(\"img\",{className:styles.image_preview,src:post.image,alt:post.title}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Conte\\xFAdo do Post:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"body\",required:true,placeholder:\"Insira o conte\\xFAdo do post...\",onChange:function onChange(e){return setBody(e.target.value);},value:body})]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Tags do Post:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"tags\",required:true,placeholder:\"Insira as tags separadas por virgula,\",onChange:function onChange(e){return setTags(e.target.value);},value:tags})]}),!response.loading&&/*#__PURE__*/_jsx(\"button\",{className:\"btn\",children:\"Editar\"}),response.loading&&/*#__PURE__*/_jsx(\"button\",{className:\"btn\",disabled:true,children:\"Aguarde...\"}),response.error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:response.error}),formError&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:formError})]})]})});};export default EditPost;","map":{"version":3,"names":["styles","useEffect","useState","useNavigate","useParams","useAuthValue","useFetchDocument","useUpdateDocument","EditPost","id","post","document","title","setTitle","image","setImage","body","setBody","tags","setTags","formError","setFormError","textTags","tagsArray","join","user","updateDocument","response","navigate","handleSubmit","e","preventDefault","URL","error","split","map","tag","trim","toLowerCase","data","uid","createdBy","displayName","edit_post","target","value","preview_title","image_preview","loading"],"sources":["C:/xampp/htdocs/Curso ReactJS/Curso ReactJS - Matheus Battisti/Projetos ReactJS/miniblog/src/pages/EditPost/EditPost.js"],"sourcesContent":["//CSS\r\nimport styles from './EditPost.module.css';\r\n\r\n//Hooks\r\nimport { useEffect, useState } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { useAuthValue } from '../../context/AuthContext';\r\nimport { useFetchDocument } from '../../hooks/useFetchDocument';\r\nimport { useUpdateDocument } from '../../hooks/useUpdateDocument';\r\n\r\nconst EditPost = () => {\r\n  const {id} = useParams();\r\n  const { document: post } = useFetchDocument(\"posts\", id);\r\n\r\n  const [title, setTitle] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [body, setBody] = useState(\"\");\r\n  const [tags, setTags] = useState([]);\r\n  const [formError, setFormError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n\r\n    if(post) {\r\n      setTitle(post.title);\r\n      setBody(post.body);\r\n      setImage(post.image);\r\n\r\n      const textTags = post.tagsArray.join(\", \");\r\n\r\n      setTags(textTags);\r\n    }\r\n\r\n  }, [post]);\r\n\r\n  const {user} = useAuthValue();\r\n\r\n  const {updateDocument, response} = useUpdateDocument(\"posts\");\r\n  \r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setFormError(\"\");\r\n\r\n    //validate image URL\r\n    try {\r\n      new URL(image)\r\n    } catch (error) {\r\n      setFormError(\"A imagem precisa ser uma URL.\");\r\n    }\r\n\r\n    //create Tag's Array\r\n    const tagsArray = tags.split(\",\").map((tag) => tag.trim().toLowerCase());\r\n\r\n    //Check all values\r\n    if (!title || !image || !tags || !body) {\r\n      setFormError(\"Por favor, preencha todos os campos!\");\r\n    }\r\n\r\n\r\n    if(formError) return;\r\n\r\n    const data = {\r\n      title,\r\n      image,\r\n      body,\r\n      tagsArray,\r\n      uid: user.uid,\r\n      createdBy: user.displayName,\r\n    }\r\n\r\n    updateDocument(id, data);\r\n\r\n    //redirect to home page\r\n    navigate(\"/dashboard\");\r\n  };\r\n\r\n  return (\r\n    <div className={styles.edit_post}>\r\n        {post && (\r\n          <>\r\n          <h2>Editar Post: {post.title}</h2>\r\n        <p>Edite os dados do post conforme desejar!</p>\r\n        <form onSubmit={handleSubmit}>\r\n          <label>\r\n            <span>Título do Post:</span>\r\n            <input \r\n              type=\"text\" \r\n              name=\"title\"\r\n              required \r\n              placeholder=\"Pense em um bom título...\"\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              value={title} \r\n            />\r\n          </label>\r\n          <label>\r\n            <span>URL da imagem:</span>\r\n            <input \r\n              type=\"text\" \r\n              name=\"image\"\r\n              required \r\n              placeholder=\"Insira a imagem que representa o seu post...\"\r\n              onChange={(e) => setImage(e.target.value)}\r\n              value={image} \r\n            />\r\n          </label>\r\n          <p className={styles.preview_title}>Preview da imagem:</p>\r\n          <img className={styles.image_preview} src={post.image} alt={post.title} />\r\n          <label>\r\n            <span>Conteúdo do Post:</span>\r\n            <textarea \r\n              name=\"body\"\r\n              required\r\n              placeholder=\"Insira o conteúdo do post...\"\r\n              onChange={(e) => setBody(e.target.value)}\r\n              value={body}\r\n              ></textarea>\r\n          </label>\r\n          <label>\r\n            <span>Tags do Post:</span>\r\n            <input \r\n              type=\"text\" \r\n              name=\"tags\"\r\n              required \r\n              placeholder=\"Insira as tags separadas por virgula,\"\r\n              onChange={(e) => setTags(e.target.value)}\r\n              value={tags} \r\n            />\r\n          </label>\r\n          {!response.loading && <button className='btn'>Editar</button>} \r\n          {response.loading && <button className='btn' disabled>Aguarde...</button>}\r\n          {response.error && <p className='error'>{response.error}</p>}\r\n          {formError && <p className='error'>{formError}</p>}\r\n        </form>\r\n          </>\r\n        )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditPost;"],"mappings":"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"},"metadata":{},"sourceType":"module"}