{"ast":null,"code":"import _regeneratorRuntime from\"C:/xampp/htdocs/Curso ReactJS/Curso ReactJS - Matheus Battisti/Projetos ReactJS/10-miniblog/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/xampp/htdocs/Curso ReactJS/Curso ReactJS - Matheus Battisti/Projetos ReactJS/10-miniblog/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/xampp/htdocs/Curso ReactJS/Curso ReactJS - Matheus Battisti/Projetos ReactJS/10-miniblog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{db}from\"../firebase/config\";import{doc,getDoc}from\"firebase/firestore\";export var useFetchDocument=function useFetchDocument(docCollection,id){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),document=_useState2[0],setDocument=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setloading=_useState6[1];// deal with memory leak\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),cancelled=_useState8[0],setCancelled=_useState8[1];useEffect(function(){function loadDocument(){return _loadDocument.apply(this,arguments);}function _loadDocument(){_loadDocument=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var docRef,docSnap;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!cancelled){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setloading(true);_context.prev=3;_context.next=6;return doc(db,docCollection,id);case 6:docRef=_context.sent;_context.next=9;return getDoc(docRef);case 9:docSnap=_context.sent;setDocument(docSnap.data());setloading(false);_context.next=19;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](3);console.log(_context.t0);setError(_context.t0.message);setloading(true);case 19:case\"end\":return _context.stop();}}},_callee,null,[[3,14]]);}));return _loadDocument.apply(this,arguments);}loadDocument();},[docCollection,id,cancelled]);useEffect(function(){return function(){return setCancelled(true);};},[]);return{document:document,loading:loading,error:error};};","map":{"version":3,"names":["useState","useEffect","db","doc","getDoc","useFetchDocument","docCollection","id","document","setDocument","error","setError","loading","setloading","cancelled","setCancelled","loadDocument","docRef","docSnap","data","console","log","message"],"sources":["C:/xampp/htdocs/Curso ReactJS/Curso ReactJS - Matheus Battisti/Projetos ReactJS/10-miniblog/src/hooks/useFetchDocument.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { db } from \"../firebase/config\";\r\nimport { doc, getDoc } from \"firebase/firestore\";\r\n\r\n\r\nexport const useFetchDocument = (docCollection, id) => {\r\n\r\n    const [document, setDocument] = useState(null);\r\n    const [error, setError] = useState(null);\r\n    const [loading, setloading] = useState(null);\r\n\r\n\r\n    // deal with memory leak\r\n    const [cancelled, setCancelled] = useState(false);\r\n\r\n    useEffect(() => {\r\n\r\n        async function loadDocument() {\r\n            if(cancelled) return;\r\n\r\n            setloading(true);\r\n\r\n            try {\r\n                const docRef = await doc(db, docCollection, id);\r\n                const docSnap = await getDoc(docRef);\r\n\r\n                setDocument(docSnap.data());\r\n\r\n                setloading(false);\r\n            } catch (error) {\r\n                console.log(error);\r\n                setError(error.message);\r\n\r\n                setloading(true);\r\n            }\r\n        }\r\n\r\n        loadDocument();\r\n\r\n    }, [docCollection, id, cancelled]);\r\n\r\n    useEffect(() => {\r\n        return () => setCancelled(true);\r\n    }, []);\r\n    \r\n    return { document, loading, error };\r\n};"],"mappings":"miBAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,EAAT,KAAmB,oBAAnB,CACA,OAASC,GAAT,CAAcC,MAAd,KAA4B,oBAA5B,CAGA,MAAO,IAAMC,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACC,aAAD,CAAgBC,EAAhB,CAAuB,CAEnD,cAAgCP,QAAQ,CAAC,IAAD,CAAxC,wCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAA0BT,QAAQ,CAAC,IAAD,CAAlC,yCAAOU,KAAP,eAAcC,QAAd,eACA,eAA8BX,QAAQ,CAAC,IAAD,CAAtC,yCAAOY,OAAP,eAAgBC,UAAhB,eAGA;AACA,eAAkCb,QAAQ,CAAC,KAAD,CAA1C,yCAAOc,SAAP,eAAkBC,YAAlB,eAEAd,SAAS,CAAC,UAAM,SAEGe,aAFH,gJAEZ,4JACOF,SADP,iEAGID,UAAU,CAAC,IAAD,CAAV,CAHJ,sCAM6BV,IAAG,CAACD,EAAD,CAAKI,aAAL,CAAoBC,EAApB,CANhC,QAMcU,MANd,qCAO8Bb,OAAM,CAACa,MAAD,CAPpC,QAOcC,OAPd,eASQT,WAAW,CAACS,OAAO,CAACC,IAAR,EAAD,CAAX,CAEAN,UAAU,CAAC,KAAD,CAAV,CAXR,iFAaQO,OAAO,CAACC,GAAR,cACAV,QAAQ,CAAC,YAAMW,OAAP,CAAR,CAEAT,UAAU,CAAC,IAAD,CAAV,CAhBR,qEAFY,+CAsBZG,YAAY,GAEf,CAxBQ,CAwBN,CAACV,aAAD,CAAgBC,EAAhB,CAAoBO,SAApB,CAxBM,CAAT,CA0BAb,SAAS,CAAC,UAAM,CACZ,MAAO,kBAAMc,aAAY,CAAC,IAAD,CAAlB,EAAP,CACH,CAFQ,CAEN,EAFM,CAAT,CAIA,MAAO,CAAEP,QAAQ,CAARA,QAAF,CAAYI,OAAO,CAAPA,OAAZ,CAAqBF,KAAK,CAALA,KAArB,CAAP,CACH,CAzCM"},"metadata":{},"sourceType":"module"}